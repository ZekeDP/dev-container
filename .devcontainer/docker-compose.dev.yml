version: "3.9"

services:
  devhost-be:
    build:
      context: .
      dockerfile: Dockerfile.be
    command: sleep infinity
    volumes:
      - ..:/workspaces:cached
      - ${USERPROFILE}/.ssh:/home/vscode/.ssh:ro
    environment:
      SPRING_PROFILES_ACTIVE: dev
    ports:
      - "8080:8080"
    networks:
      - devnet

  devhost-fe:
    build:
      context: .
      dockerfile: Dockerfile.fe
    command: sleep infinity
    volumes:
      - ..:/workspaces:cached
      - ${USERPROFILE}/.ssh:/home/vscode/.ssh:ro
    environment:
      VITE_API_BASE: http://localhost:8080
    ports:
      - "5173:5173"
    networks:
      - devnet

networks:
  devnet: {}